<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Paxos Client - {{ client.id }}</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>Paxos Consensus System</h1>
            <h2>Client: {{ client.id }}</h2>
        </header>

        <div class="status-bar">
            <div class="status-item">
                <span class="status-label">Status:</span>
                <span id="client-status" class="status-value {% if client.running %}status-running{% else %}status-idle{% endif %}">
                    {% if client.running %}Running{% else %}Idle{% endif %}
                </span>
            </div>
            <div class="status-item">
                <span class="status-label">Total Requests:</span>
                <span id="total-requests" class="status-value">{{ client.total_requests }}</span>
            </div>
            <div class="status-item">
                <span class="status-label">Successful:</span>
                <span id="successful-requests" class="status-value success">{{ client.successful_requests }}</span>
            </div>
            <div class="status-item">
                <span class="status-label">Failed:</span>
                <span id="failed-requests" class="status-value error">{{ client.failed_requests }}</span>
            </div>
        </div>

        <div class="main-content">
            <div class="action-panel">
                <h3>Control Panel</h3>
                <div class="control-actions">
                    <button id="start-requests" class="btn btn-primary" {% if client.running %}disabled{% endif %}>
                        Start Random Requests
                    </button>
                    <button id="stop-requests" class="btn btn-danger" {% if not client.running %}disabled{% endif %}>
                        Stop Requests
                    </button>
                    <a href="/dashboard" class="btn btn-secondary">View Dashboard</a>
                </div>

                <div class="control-settings">
                    <h4>Request Settings</h4>
                    <div class="form-group">
                        <label for="num-requests">Number of Requests:</label>
                        <input type="number" id="num-requests" min="1" max="100" value="{{ client.min_requests }}" 
                            placeholder="Random between {{ client.min_requests }} and {{ client.max_requests }}">
                    </div>
                    <div class="form-group">
                        <label for="min-wait">Min Wait Time (seconds):</label>
                        <input type="number" id="min-wait" min="0.1" max="10" step="0.1" value="{{ client.min_wait }}">
                    </div>
                    <div class="form-group">
                        <label for="max-wait">Max Wait Time (seconds):</label>
                        <input type="number" id="max-wait" min="0.1" max="10" step="0.1" value="{{ client.max_wait }}">
                    </div>
                    <button id="update-settings" class="btn btn-secondary">Update Settings</button>
                </div>
            </div>

            <div class="manual-request-panel">
                <h3>Manual Request</h3>
                <div class="form-group">
                    <label for="resource-data">Resource Data (JSON):</label>
                    <textarea id="resource-data" rows="8" placeholder="Enter JSON data for the resource">
{
    "name": "Manual Resource",
    "value": 42,
    "created_by": "{{ client.id }}",
    "timestamp": null,
    "data": {
        "field1": "value1",
        "field2": 3.14,
        "field3": true
    }
}
                    </textarea>
                </div>
                <button id="send-request" class="btn btn-primary">Send Request</button>
                <div id="request-result" class="result-panel hidden">
                    <h4>Request Result:</h4>
                    <pre id="result-content"></pre>
                </div>
            </div>
        </div>

        <div class="recent-activity">
            <h3>Recent Activity</h3>
            <div id="activity-log">
                <div class="activity-empty">No recent activity. Start sending requests to see activity here.</div>
            </div>
        </div>

        <footer>
            <p>Paxos Consensus System - Connected to Proposer: <span>{{ client.proposer_url }}</span></p>
        </footer>
    </div>

    <script src="/static/js/client.js"></script>
</body>
</html>